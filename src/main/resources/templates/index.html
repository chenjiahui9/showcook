<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta content="" name="description" />
    <meta content="webthemez" name="author" />
    <title>BRILLIANT Free Bootstrap Admin Template</title>
    <!-- Bootstrap Styles-->
    <link th:href="@{assets/css/bootstrap.css}" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link th:href="@{assets/css/font-awesome.css}" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link th:href="@{assets/js/morris/morris-0.4.3.min.css}" rel="stylesheet" />
    <!-- Custom Styles-->
    <link th:href="@{assets/css/custom-styles.css}" rel="stylesheet" />
    <!-- Google Fonts-->
    <link th:href="@{https://fonts.googleapis.com/css?family=Open+Sans}" rel='stylesheet' type='text/css' />
    <link rel="stylesheet" th:href="@{assets/js/Lightweight-Chart/cssCharts.css}"/>
    <style type="text/css">
        .bar {
            margin-top:10px;
            height:10px;
            max-width: 300px;
            background: green;
        }
    </style>
    <!-- jQuery Js -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <!-- jQueryFileUpload Js -->
    <script src="assets/js/fileupload/jquery.fileupload.js"></script>
    <script src="assets/js/fileupload/jquery.iframe-transport.js"></script>
    <script src="assets/js/fileupload/jquery.ui.widget.js"></script>
    <script src="assets/js/fileupload/jquery.xdr-transport.js"></script>

    <script type="text/javascript">
        $(".upinput").fileupload({
            url:"accept_video_one.php",//文件上传地址，当然也可以直接写在input的data-url属性内
            dataType: "json", //如果不指定json类型，则传来的json字符串就需要解析jQuery.parseJSON(data.result);
            formData:function(form){//如果需要额外添加参数可以在这里添加
                return [{name:"param1",value:$(".upinput").attr("param1")},
                    {name:"param2",value:$(".param2").val()}];
            },
            done:function(e,data){
                //done方法就是上传完毕的回调函数，其他回调函数可以自行查看api
                //注意data要和jquery的ajax的data参数区分，这个对象包含了整个请求信息
                //返回的数据在data.result中，这里dataType中设置的返回的数据类型为json
                if(data.result.sta) {
                    // 上传成功：
                    $(".upstatus").html(data.result.msg);
                    $(".preview").html("<embed src="+data.result.previewSrc+
                        " allowscriptaccess='always' allowfullscreen='true' wmode='opaque'"+
                        " width='480' height='400'></embed>");
                } else {
                    // 上传失败：
                    $(".progress .bar").css("width", "0%");
                    $(".upstatus").html("<span style='color:red;'>"+data.result.msg+"</span>");
                }

            },
            progress: function (e, data) {//上传进度
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $(".progress .bar").css("width", progress + "%");
                $(".upstatus").html("正在上传...");
            }
        });
    </script>
</head>

<body>

    <div style="margin-top:20px;">
        <span>请上传：</span>
        <span style='color:blue;'>(支持'3gp','rmvb','flv','wmv','avi','mkv','mp4','mp3','wav'格式)</span>
    </div>
    <div style="margin-top:10px;">
        <form action="" name="" enctype="multipart/form-data">
            <input type="file" name="files" class="upinput" param1="xxx"/>
            <input type="hidden" name="param2" value="yyy" class="param2">
        </form>
    </div>
    <!-- 上传进度条及状态： -->
    <div class="progress">
        <div class="bar" style="width: 0%;"></div>
        <div class="upstatus" style="margin-top:10px;"></div>
    </div>
    <!-- 预览框： -->
    <div class="preview"></div>




<!-- /. WRAPPER  -->
    <!-- JS Scripts-->



    <!-- Bootstrap Js -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- Metis Menu Js -->
    <script src="assets/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="assets/js/morris/morris.js"></script>
	<script src="assets/js/easypiechart.js"></script>
	<script src="assets/js/easypiechart-data.js"></script>
    <script src="assets/js/Lightweight-Chart/jquery.chart.js"></script>
    <!-- Custom Js -->
    <script src="assets/js/custom-scripts.js"></script>
    <!-- Chart Js -->
    <script type="text/javascript" src="assets/js/Chart.min.js"></script>  
    <script type="text/javascript" src="assets/js/chartjs.js"></script> 

</body>
</html>
